# zig-releaser

zig-releaser is a hack that allows Zig programs to be built, packaged, and released with [GoReleaser](https://goreleaser.com), a tool for publishing Go programs. 

[Here is an example](https://github.com/knadh/csv2json/releases) for a Zig program published to GitHub with GoReleaser. The changelog and artefacts are all automatically generated by GoReleaser. This hack has only been tested with GitHub but should work with other release targets GoReleaser supports.

### How to use

- Install [Go](https://golang.org/doc/install). Unfortunately, GoRelease is tightly coupled with Go.
- Install [GoReleaser](https://goreleaser.com/install/). Setup the [GitHub token](https://goreleaser.com/quick-start/).


- Copy `dummy.go`, `build.sh`, `.goreleaser` from this repo to the root of the Zig project.
- Edit `.goreleaser` for the project (generally the `binary`, `goos`, `files` fields).

Once the project is ready for release, add a semver tag (`git tag -a v0.1.0 -m v0.1.0`)

### Dry run
`goreleaser --rm-dist --skip-validate --skip-publish --parallelism=1`

The releases will appear in the `dist` directory.

### Publish
`goreleaser --rm-dist --skip-validate --parallelism=1`

**IMPORTANT** Without `--parallelism=1`, GoReleaser will run multiple builds parallelly, breaking this hack. 
